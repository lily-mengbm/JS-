<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>键盘移动div优化</title>
</head>
<style>
  #box1{
    width: 100px;
    height: 100px;
    background-color: pink;
    position: absolute;
  }
</style>
<script>
  window.onload = function () {
    //定义一个变量表示速度
    var speed = 10;
    //创建一个变量表示方向
    var dir = 0;
    //开启一个定时器来控制div的移动
    setInterval(function () {
      switch(dir){
        case 37:
          //上
          box1.style.left = box1.offsetLeft - speed + "px";
          break;
        case 39:
          //右
          box1.style.left = box1.offsetLeft + speed + "px";
          break;
        case 38:
          box1.style.top = box1.offsetTop - speed + "px";
          break;
        case 40:
          //下
          box1.style.top = box1.offsetTop + speed + "px";
          break;
      }
    }, 30);

    //使div可以根据不同的方向键往不同的方向移动
    var box1 = document.getElementById("box1");
    document.onkeydown = function (event) {
      event = event || window.event;
      //当用户按了ctrl键 速度变快
      if(event.ctrlKey){
        speed = 30;
      }else{
        speed = 10;
      }
      //使dir等于按键的值
      dir = event.keyCode;
    };
    //当按键松开时，div不再移动
    document.onkeyup = function(){
      dir = 0;
    }
  }
</script>
</head>
<body>
<div id="box1"></div>
</body>
</html>
